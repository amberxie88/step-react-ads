(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{287:function(e,t,a){e.exports=a(493)},292:function(e,t,a){},493:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a.n(l);a(292),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(556),o=a(557),i=a(20),u=a(21),m=a.n(u),d=a(4),h=a(554),g=a(546),p=a(544),E=a(247),f=a.n(E),v=a(248),b=a.n(v),k=a(249),y=a.n(k),S=a(126),w=a(563),O=a(549),C=a(555),j=a(250),x=a.n(j),T=a(537),A=a(14),I=a.n(A),R=a(22),P=a(27),D=a(28),L=a(19),W=a(30),N=a(29);function M(e){return r.a.createElement(S.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}var B=a(538),F=Object(T.a)({depositContext:{flex:1}});function q(e){var t=F();return r.a.createElement("div",{className:t.root},r.a.createElement(B.a,{variant:"outlined",onClick:e.onClick},"Logout"))}r.a.Component;var Q=a(551),G=a(244),H=a.n(G),K=a(245),J=a.n(K),U=a(246),z=a.n(U),_=a(550),Y=a(494),X=a(33),$=a(17),V=a(38);function Z(){var e=Object(X.a)(),t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)("loading"),o=Object(i.a)(s,2),u=o[0],d=o[1];Object(n.useEffect)((function(){Object(R.a)(I.a.mark((function e(){var t,a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/campaign",new URLSearchParams({query:"SELECT campaign.name, metrics.impressions, metrics.clicks, segments.device FROM campaign\n                WHERE segments.date DURING LAST_30_DAYS AND metrics.impressions > 0 \n                ORDER BY metrics.clicks ASC LIMIT 100"}));case 3:if(t=e.sent,a=t.data,console.log(a),a.meta.status===V.OK.toString()){e.next=10;break}throw new Error(a.meta.message);case 10:for(n=0;n<a.response.length;n++)a.response[n]["metrics.clicks"]=+a.response[n]["metrics.clicks"];c(a.response),d("loaded");case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0.message),c(e.t0.message),d("error");case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Ad Clicks vs. Impressions (Last 30 Days)"),function(){switch(u){case"loading":return r.a.createElement($e,null);case"loaded":return r.a.createElement($.h,null,r.a.createElement($.g,{data:l,margin:{top:16,right:16,bottom:24,left:24}},r.a.createElement($.l,{dataKey:"metrics.impressions",stroke:e.palette.text.secondary,domain:[0,"dataMax"]},r.a.createElement($.d,{position:"bottom",style:{textAnchor:"middle",fill:e.palette.text.primary}},"Impressions over last 30 days")),r.a.createElement($.m,{dataKey:"metrics.clicks",stroke:e.palette.text.secondary,domain:[0,"dataMax"]},r.a.createElement($.d,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary}},"Ad clicks")),r.a.createElement($.n,{dataKey:"campaign.name",name:"campaign"}),r.a.createElement($.f,{type:"monotone",dataKey:"metrics.clicks",stroke:e.palette.primary.main,dot:!0})));case"error":return r.a.createElement(M,null,"Something Went Wrong. Here's the Error Message: "+l);default:return r.a.createElement(M,null," Something Went Wrong")}}())}var ee=a(251);function te(){var e=Object(X.a)(),t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1],s=Object(T.a)({depositContext:{flex:1}})(),o=Object(n.useState)("loading"),u=Object(i.a)(o,2),d=u[0],h=u[1];Object(n.useEffect)((function(){Object(R.a)(I.a.mark((function e(){var t,a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/chart-api");case 3:if(t=e.sent,a=t.data,console.log(a),a.meta.status===V.OK.toString()){e.next=10;break}throw new Error(a.meta.message);case 10:for(n=0;n<a.response.length;n++)a.response[n]["metrics.clicks"]=+a.response[n]["metrics.clicks"];c(a.response),h("loaded");case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0.message),c(e.t0.message),h("error");case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Expanded Text Ad Clicks vs. Sentiment"),r.a.createElement(S.a,{color:"textSecondary",className:s.depositContext},"Graph of clicks vs. headline sentiment (0 most negative, 1 most positive)."),function(){switch(d){case"loading":return r.a.createElement($e,null);case"loaded":var t=l.map((function(e){return e["metrics.clicks"]}));Math.max.apply(Math,Object(ee.a)(t));return r.a.createElement($.h,null,r.a.createElement($.j,{width:400,height:400,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement($.c,null),r.a.createElement($.l,{dataKey:"sentiment",type:"number",name:"sentiment",domain:[0,1]},r.a.createElement($.d,{position:"bottom",style:{textAnchor:"middle",fill:e.palette.text.primary}},"Sentiment")),r.a.createElement($.m,{dataKey:"metrics.clicks",type:"number",name:"clicks",domain:[0,"dataMax"]},r.a.createElement($.d,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary}},"Clicks")),r.a.createElement($.n,{dataKey:"headline",name:"ad headline"}),r.a.createElement($.i,{name:"Sentiment Graph",data:l,fill:"#8884d8"}),r.a.createElement($.k,{cursor:{strokeDasharray:"3 3"}})));case"error":return r.a.createElement(M,null,"Something Went Wrong. Here's the Error Message: "+l);default:return r.a.createElement(M,null," Something Went Wrong")}}())}function ae(){var e=Object(X.a)(),t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)("loading"),o=Object(i.a)(s,2),u=o[0],d=o[1];Object(n.useEffect)((function(){Object(R.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/campaign",new URLSearchParams({query:"SELECT campaign.name, metrics.clicks FROM campaign ORDER BY metrics.clicks DESC LIMIT 5"}));case 3:if(t=e.sent,(a=t.data).meta.status===V.OK.toString()){e.next=9;break}throw new Error(a.meta.message);case 9:c(a.response),d("loaded");case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.message),c(e.t0.message),d("error");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Clicks Per Campaign"),function(){switch(u){case"loading":return r.a.createElement($e,null);case"loaded":return r.a.createElement($.h,null,r.a.createElement($.b,{data:l,margin:{top:16,right:16,bottom:0,left:24}},r.a.createElement($.c,{strokeDasharray:"3 3"}),r.a.createElement($.l,{dataKey:"campaign.name",stroke:e.palette.text.secondary}),r.a.createElement($.m,null),r.a.createElement($.k,null),r.a.createElement($.e,null),r.a.createElement($.a,{dataKey:"metrics.clicks",fill:"#8884d8"})));case"error":return r.a.createElement(M,null,"Something Went Wrong. Here's the Error Message: "+l);default:return r.a.createElement(M,null," Something Went Wrong")}}())}var ne=Object(T.a)({depositContext:{flex:1}});function re(){var e=ne(),t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)("loading"),o=Object(i.a)(s,2),u=o[0],d=o[1];Object(n.useEffect)((function(){Object(R.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/campaign",new URLSearchParams({query:"SELECT account_budget.status, \n              account_budget.amount_served_micros, customer.currency_code \n              FROM account_budget"}));case 3:if(t=e.sent,(a=t.data).meta.status===V.OK.toString()){e.next=9;break}throw new Error(a.meta.message);case 9:c(a.response),d("loaded");case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.message),c(e.t0.message),d("error");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Total Ad Spend"),function(){switch(u){case"loading":return r.a.createElement($e,null);case"loaded":return r.a.createElement("div",null,r.a.createElement(S.a,{component:"p",variant:"h4"},l[0]["accountBudget.amountServedMicros"]/1e6," ",l[0]["customer.currencyCode"]),r.a.createElement(S.a,{color:"textSecondary",className:e.depositContext},"Account Budget Status: ",l[0]["accountBudget.status"]));case"error":return r.a.createElement(M,null,"Something Went Wrong. Here's the Error Message: "+l);default:return r.a.createElement(M,null," Something Went Wrong")}}())}var le=a(542),ce=a(543),se=a(541),oe=a(539),ie=a(540),ue=a(560),me=a(564),de=Object(T.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}})),he=[{id:"campaign.id",numeric:!1,label:"Id"},{id:"campaign.name",numeric:!1,label:"Name"},{id:"campaign.status",numeric:!1,label:"Status"},{id:"metrics.clicks",numeric:!0,label:"Clicks"},{id:"metrics.impressions",numeric:!0,label:"Impressions"}];function ge(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function pe(e){e.classes;var t=e.order,a=e.orderBy,n=(e.rowCount,e.onRequestSort);return r.a.createElement(oe.a,null,r.a.createElement(ie.a,null,he.map((function(e){return r.a.createElement(se.a,{key:e.id,sortDirection:a===e.id&&t},r.a.createElement(me.a,{active:a===e.id,direction:a===e.id?t:"asc",onClick:(l=e.id,function(e){n(e,l)})},e.label));var l}))))}function Ee(){var e=de(),t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)("loading"),o=Object(i.a)(s,2),u=o[0],d=o[1],h=r.a.useState(10),g=Object(i.a)(h,2),p=g[0],E=g[1],f=r.a.useState(0),v=Object(i.a)(f,2),b=v[0],k=v[1],y=r.a.useState("asc"),S=Object(i.a)(y,2),w=S[0],O=S[1],C=r.a.useState("campaign.id"),j=Object(i.a)(C,2),x=j[0],T=j[1],A=r.a.useState(!1),P=Object(i.a)(A,2),D=(P[0],P[1],function(e){"A"===e.target.value.toString().charAt(0)&&(e.target.value=l.length),E(+e.target.value),k(0)}),L=function(e,t){k(t)},W=function(e,t){O(x===t&&"asc"===w?"desc":"asc"),T(t)};Object(n.useEffect)((function(){Object(R.a)(I.a.mark((function e(){var t,a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/campaign",new URLSearchParams({query:"SELECT campaign.id, campaign.name, campaign.status, metrics.clicks, metrics.impressions FROM campaign ORDER BY campaign.id          "}));case 3:for(t=e.sent,a=t.data,n=0;n<a.response.length;n++)a.response[n]["campaign.id"]=+a.response[n]["campaign.id"],a.response[n]["metrics.clicks"]=+a.response[n]["metrics.clicks"],a.response[n]["metrics.impressions"]=+a.response[n]["metrics.impressions"];if(a.meta.status===V.OK.toString()){e.next=10;break}throw new Error(a.meta.message);case 10:c(a.response),d("loaded");case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0.message),c(e.t0.message),d("error");case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Campaign Data"),function(){switch(u){case"loading":return r.a.createElement(M,null," Loading ... ");case"loaded":return r.a.createElement("div",null,r.a.createElement(le.a,{size:"small"},r.a.createElement(pe,{classes:e,order:w,orderBy:x,onRequestSort:W,rowCount:l.length}),r.a.createElement(ce.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(l,function(e,t){return"desc"===e?function(e,a){return ge(e,a,t)}:function(e,a){return-ge(e,a,t)}}(w,x)).slice(b*p,b*p+p).map((function(e,t){return r.a.createElement(ie.a,{key:e["campaign.id"]},r.a.createElement(se.a,null,e["campaign.id"]),r.a.createElement(se.a,null,e["campaign.name"]),r.a.createElement(se.a,null,e["campaign.status"]),r.a.createElement(se.a,null,e["metrics.clicks"]),r.a.createElement(se.a,null,e["metrics.impressions"]))})))),r.a.createElement(ue.a,{rowsPerPageOptions:[5,10,25,"All "+l.length.toString()+" Rows"],component:"div",count:l.length,rowsPerPage:p,page:b,onChangePage:L,onChangeRowsPerPage:D}));case"error":return r.a.createElement(M,null,"Something Went Wrong. Here's the Error Message: "+l);default:return r.a.createElement(M,null," Something Went Wrong")}}())}var fe=a(42),ve=a(124),be=a(243),ke=function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(be.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(ve.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}},ye=[{target:"body",content:r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to the Query Page!"),r.a.createElement("p",null,"This page is a sample of how the Ads API can be used to obtain information about an account. The queries follow the Google Ads Query Language (",r.a.createElement("a",{href:"https://developers.google.com/google-ads/api/docs/query/interactive-gaql-builder"},"GAQL"),"), which is then processed by the servlet. The code primarily lies in QueryDashboard.js and GetCampaignsServlet.java")),placement:"center"},{target:".selected-account",content:r.a.createElement("div",null,r.a.createElement("h2",null,"Select Your Client Account"),r.a.createElement("p",null,"After authenticating on the Login page, the user is prompted to select a client account to query. Under every Google Ads account, there can be multiple manager accounts, which may manage separate clients or other managers. To learn more about how we keep track of client accounts of different sessions, revisit our login page!"))},{target:".query-card",content:r.a.createElement("div",null,r.a.createElement("h2",null,"Query Card"),r.a.createElement("p",null,"Here, the user may enter any query that follows the GAQL syntax, and the results will be generated below. Users will be notified if any error occurs during the Ads API call. To build your own GAQL queries or learn more about the GAQL syntax, visit"," ",r.a.createElement("a",{href:"https://developers.google.com/google-ads/api/docs/query/interactive-gaql-builder"},"this link"),"."))}],Se=[{target:"body",content:r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to the Google Ads API Web App Demo!"),r.a.createElement("p",null,"Throughout the website, we will have a series of tours showing how we implemented the Ads API into a simple web application, and how you can do so as well! Intermediate developers have historically struggled with integrating the API, especially in regards to the OAuth 2.0 web flow, and we hope this will serve as a starter project or example of how the Ads API can be used. Check out our",r.a.createElement("a",{href:"https://github.com/amberxie88/step-react-ads"},"Github page"),".")),placement:"center"},{target:"body",content:r.a.createElement("div",null,r.a.createElement("h1",null,"This is the Login Page"),r.a.createElement("p",null,"This Login Page implements the OAuth 2.0 procedure, a historically challenging task for Intermediate developers. To implement this, we rely on two main servlets: OAuthServlet.java and CallbackServlet.java, and we use Datastore to maintain credentials and refresh tokens for each session.")),placement:"center"},{target:".login-button",content:r.a.createElement("div",null,r.a.createElement("h2",null,"Login Button"),r.a.createElement("p",null,"This Login Button makes a call to the OAuth servlet, which retrieves the necessary credentials, the redirect URI, and the current HTTP Session to generate a unique URL for login. After the user logs in, they are redirected to the redirect URI, which is the Callback Servlet. The servlet verifies that it is retrieving the correct token for the session, generates the refresh token, and stores it in Datastore. It is important to note that each session is mapped to different refresh tokens."))},{target:".available-accounts",content:r.a.createElement("div",null,r.a.createElement("h2",null,"Available Customer IDs"),r.a.createElement("p",null,"Once the user is logged in, the AccessibleCustomersServlet is called. This makes a call to the Ads API and returns client accounts that the user has access to. The user may choose one, and the SetClientAccServlet is called, which maps the session ID to the selected customer ID, and uploads it to Datastore."))},{target:".logout-button",content:r.a.createElement("div",null,r.a.createElement("h2",null,"Logout Button"),r.a.createElement("p",null,"At any point, if the user chooses to log in, their refresh token will be removed from Datastore via the LogoutServlet."))}],we=[{target:"body",content:r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to the Dashboard Page!"),r.a.createElement("p",null,"This page is a sample of how the Ads UI can be replicated and customized using custom calls and charts. The code primarily lies in ReportsDashboard.js and GetCampaignsServlet.java")),placement:"center"},{target:".clicks-per-campaign",content:r.a.createElement("div",null,r.a.createElement("h2",null,"Clicks Per Campaign Chart"),r.a.createElement("p",null,"This chart uses API data from your Ads Account to visualize how well campaigns are doing. This is an example of a chart that can be directly replicated from the Google Ads UI."))},{target:".recent-deposits",content:r.a.createElement("div",null,r.a.createElement("h2",null,"Total Ad Spend"),r.a.createElement("p",null,"This calculates the total ad spend for the user."))},{target:".chart-api",content:r.a.createElement("div",null,r.a.createElement("h1",null,"Sentiment Analysis vs. Number of Clicks"),r.a.createElement("p",null,"To demonstrate how we can use external APIs to analyze the Ads data, we have implemented the Sentiment Analysis API, which calculates a sentiment score (0 for negative, 1 for positive). This chart graphs the sentiment of ads headlines for extended text ads vs. the number of clicks to see if there is any correlation."))},{target:".chart-1",content:r.a.createElement("div",null,r.a.createElement("h2",null,"Sales Chart"),r.a.createElement("p",null,"This chart graphs ad impressions over clicks."))},{target:".campaign-data",content:r.a.createElement("div",null,r.a.createElement("h2",null,"Campaign Data"),r.a.createElement("p",null,"This list of campaign IDs, names, status, clicks, and impressions is generated from a call to the Ads API."))}],Oe=Object(T.a)(ke),Ce=function(e){Object(W.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleStorageChange=n.handleStorageChange.bind(Object(L.a)(n)),n.updateShouldRunTutorial=n.updateShouldRunTutorial.bind(Object(L.a)(n)),n.handleJoyrideCallback=n.handleJoyrideCallback.bind(Object(L.a)(n)),window.addEventListener("storage",(function(){n.handleStorageChange()})),n.state={shouldRunTutorial:n.updateShouldRunTutorial()},n}return Object(D.a)(a,[{key:"updateShouldRunTutorial",value:function(){return null==localStorage.getItem("runTutorial")||"true"===localStorage.getItem("runTutorial")}},{key:"handleStorageChange",value:function(){this.setState({shouldRunTutorial:this.updateShouldRunTutorial()})}},{key:"handleJoyrideCallback",value:function(e){var t=e.status;[fe.a.FINISHED,fe.a.SKIPPED].includes(t)&&(localStorage.setItem("runTutorial",!1),this.setState({shouldRunTutorial:!1}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.b,{steps:we,continuous:!0,showProgress:!0,showSkipButton:!0,run:this.state.shouldRunTutorial,callback:this.handleJoyrideCallback}),r.a.createElement(je,null))}}]),a}(r.a.Component),je=function(e){var t=Oe(),a=Object(d.a)(t.paper,t.fixedHeight);return r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:9,xl:9},r.a.createElement(Y.a,{className:a+" clicks-per-campaign"},r.a.createElement(ae,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3,xl:3},r.a.createElement(Y.a,{className:a+" recent-deposits"},r.a.createElement(re,null))),r.a.createElement(_.a,{item:!0,xs:12,md:12,xl:6},r.a.createElement(Y.a,{className:a+" chart-api"},r.a.createElement(te,null))),r.a.createElement(_.a,{item:!0,xs:12,md:12,xl:6},r.a.createElement(Y.a,{className:a+" chart-1"},r.a.createElement(Z,null))),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(Y.a,{className:t.paper+" campaign-data"},r.a.createElement(Ee,null))))},xe=Ce;function Te(e){var t=e.rows,a=e.fields;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Query Results"),r.a.createElement(Ae,{rows:t,fields:a}))}function Ae(e){var t=e.rows,a=e.fields,n=r.a.useState(10),l=Object(i.a)(n,2),c=l[0],s=l[1],o=r.a.useState(0),u=Object(i.a)(o,2),m=u[0],d=u[1],h=t.slice(m*c,m*c+c);return r.a.createElement("div",null,r.a.createElement(le.a,{size:"small"},r.a.createElement(oe.a,null,r.a.createElement(ie.a,null,a.map((function(e,t){return r.a.createElement(se.a,{key:"col"+t},e)})))),r.a.createElement(ce.a,null,h.map((function(e){return r.a.createElement(ie.a,{key:"row"+e.id},a.map((function(t){return r.a.createElement(se.a,{key:t},e[t])})))})))),r.a.createElement(ue.a,{rowsPerPageOptions:[5,10,25,"All "+t.length.toString()+" Rows"],component:"div",count:t.length,rowsPerPage:c,page:m,onChangePage:function(e,t){d(t)},onChangeRowsPerPage:function(e){"A"===e.target.value.toString().charAt(0)&&(e.target.value=t.length),s(+e.target.value),d(0)}}))}var Ie=a(561),Re=Object(T.a)((function(e){return{root:{margin:e.spacing(1)}}}));function Pe(e){var t,a,n,r=[];for(t=0;t<e.length;t++)r.push((a=t,(n=e[t]).id=a,n));return r}function De(e){var t=Re();return r.a.createElement("div",{className:t.root},r.a.createElement(B.a,{variant:"outlined",onClick:e.onClick},"Submit"))}function Le(e){var t=Re();return r.a.createElement("div",{className:t.root},r.a.createElement(B.a,{variant:"outlined",onClick:e.onClick},"Export to Google Sheets"))}var We=function(e){Object(W.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(L.a)(n)),n.handleQuery=n.handleQuery.bind(Object(L.a)(n)),n.state={value:"",rows:[],fields:[],rowsPerPage:5,status:"inputRequired",errorMessage:""},n}return Object(D.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleQuery",value:function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.value,a||this.setState({status:"loading"}),e.prev=2,e.next=5,m.a.post("/campaign",new URLSearchParams({query:n,exportTable:a}));case 5:if(r=e.sent,(l=r.data).meta.status===V.OK.toString()){e.next=11;break}throw new Error(l.meta.message);case 11:a?alert("export successful"):this.setState({rows:Pe(l.response),fields:l.fieldmask,status:"loaded"});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0.message),this.setState({status:"error",errorMessage:e.t0.message});case 18:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"pickContentToDisplay",value:function(){var e=this;switch(this.state.status){case"inputRequired":return r.a.createElement(M,null," Enter a query to see the results ");case"loading":return r.a.createElement($e,null);case"loaded":return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{rows:this.state.rows,fields:this.state.fields,rowsPerPage:this.state.rowsPerPage}),r.a.createElement(Le,{onClick:function(t){return e.handleQuery(t,!0)}}));case"error":return r.a.createElement(M,null,"Something Went Wrong. Here's the Error Message: "+this.state.errorMessage);default:return r.a.createElement(M,null," Something Went Wrong")}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Query Here"),r.a.createElement(Ie.a,{value:this.state.value,onChange:this.handleChange,id:"standard-full-width",label:"Enter Query",style:{margin:8},placeholder:"SELECT campaign.id, campaign.name FROM campaign",helperText:"make sure to select an account!",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(De,{onClick:function(t){return e.handleQuery(t,!1)}}),this.pickContentToDisplay())}}]),a}(r.a.Component),Ne=function(e){Object(W.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).getClient=n.getClient.bind(Object(L.a)(n)),n.state={selectedClient:[],status:"none selected"},n}return Object(D.a)(a,[{key:"getClient",value:function(){var e=Object(R.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({status:"loading"}),e.next=3,m.a.get("/client");case 3:t=e.sent,a=t.data,console.log(a),a.loginId?this.setState({selectedClient:a,status:"loaded"}):this.setState({status:"none selected"});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pickContentToDisplay",value:function(){var e=this.state.selectedClient;switch(this.state.status){case"none selected":return r.a.createElement(S.a,{variant:"overline"},"Select a client on the login page.");case"loading":return r.a.createElement($e,null);case"loaded":return r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,r.a.createElement(se.a,{key:e.loginId},e.loginId),r.a.createElement(se.a,{key:e.customerId},e.customerId),r.a.createElement(se.a,{key:e.name},e.name)));default:return r.a.createElement(S.a,{variant:"overline"},"Select a client on the login page.")}}},{key:"componentDidMount",value:function(){this.getClient()}},{key:"render",value:function(){this.state.selectedClient;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Select a Client Account to Query"),r.a.createElement(le.a,{size:"small"},r.a.createElement(oe.a,null,r.a.createElement(ie.a,null,r.a.createElement(se.a,null,"Customer ID"),r.a.createElement(se.a,null,"Client Account ID"),r.a.createElement(se.a,null,"Client Account Name"))),this.pickContentToDisplay()))}}]),a}(r.a.Component),Me=Object(T.a)(ke),Be=function(e){Object(W.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleStorageChange=n.handleStorageChange.bind(Object(L.a)(n)),n.updateShouldRunTutorial=n.updateShouldRunTutorial.bind(Object(L.a)(n)),n.handleJoyrideCallback=n.handleJoyrideCallback.bind(Object(L.a)(n)),window.addEventListener("storage",(function(){n.handleStorageChange()})),n.state={shouldRunTutorial:n.updateShouldRunTutorial()},n}return Object(D.a)(a,[{key:"updateShouldRunTutorial",value:function(){return null==localStorage.getItem("runTutorial")||"true"===localStorage.getItem("runTutorial")}},{key:"handleStorageChange",value:function(){this.setState({shouldRunTutorial:this.updateShouldRunTutorial()})}},{key:"handleJoyrideCallback",value:function(e){var t=e.status;[fe.a.FINISHED,fe.a.SKIPPED].includes(t)&&(localStorage.setItem("runTutorial",!1),this.setState({shouldRunTutorial:!1}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.b,{steps:ye,continuous:!0,showProgress:!0,showSkipButton:!0,run:this.state.shouldRunTutorial,callback:this.handleJoyrideCallback}),r.a.createElement(Fe,null))}}]),a}(r.a.Component),Fe=function(e){var t=Me();return r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(Y.a,{className:t.paper+" selected-account"},r.a.createElement(Ne,null))),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(Y.a,{className:t.paper+" query-card"},r.a.createElement(We,null))))},qe=Be,Qe=Object(T.a)({depositContext:{flex:1}});function Ge(e){var t=Qe();return r.a.createElement("div",{className:t.root},r.a.createElement(B.a,{variant:"outlined"},r.a.createElement("a",{style:{textDecoration:"none"},href:e.onClick},"Add Account")))}var He=function(e){Object(W.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleLogin=n.handleLogin.bind(Object(L.a)(n)),n.state={redirect:""},n}return Object(D.a)(a,[{key:"handleLogin",value:function(){var e=Object(R.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/oauth");case 3:t=e.sent,a=t.data,this.setState({redirect:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(R.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.handleLogin();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Authenticate your Ads Account"),r.a.createElement(Ge,{onClick:this.state.redirect}))}}]),a}(r.a.Component),Ke=a(562),Je=function(e){Object(W.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).fetchCustomers=n.fetchCustomers.bind(Object(L.a)(n)),n.handleClick=n.handleClick.bind(Object(L.a)(n)),n.isSelected=n.isSelected.bind(Object(L.a)(n)),n.state={customerIds:[],selected:"",status:"none authenticated",errorMessage:""},n}return Object(D.a)(a,[{key:"fetchCustomers",value:function(){var e=Object(R.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({status:"loading"}),e.prev=1,e.next=4,m.a.get("/customer");case 4:if(t=e.sent,"200"===(a=t.data).meta.status){e.next=10;break}throw new Error(a.meta.message);case 10:this.setState({customerIds:a.response,status:"loaded"});case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0.message),this.setState({status:"none authenticated",errorMessage:e.t0.message});case 17:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"pickContentToDisplay",value:function(){var e=this,t=this.state.customerIds;switch(this.state.status){case"none authenticated":return r.a.createElement(S.a,{variant:"overline"},"Log in to access your accounts.");case"error":return r.a.createElement(S.a,{variant:"overline"},"Something Went Wrong. Here's the Error Message: "+this.state.errorMessage);case"loading":return r.a.createElement($e,null);case"loaded":return r.a.createElement(ce.a,null,t.map((function(t){return r.a.createElement(ie.a,{key:t.id,onClick:function(a){return e.handleClick(a,t)},role:"checkbox","aria-checked":e.isSelected(t.child),tabIndex:-1,selected:e.isSelected(t.child),hover:!0},r.a.createElement(se.a,{padding:"checkbox"},r.a.createElement(Ke.a,{checked:e.isSelected(t.child)})),r.a.createElement(se.a,{key:t.id},t.id),r.a.createElement(se.a,{key:t.child},t.child),r.a.createElement(se.a,{key:t.name},t.name))})));default:return r.a.createElement(S.a,{variant:"overline"},"Log in to access your accounts.")}}},{key:"componentDidMount",value:function(){this.fetchCustomers(),this.setState({selected:""})}},{key:"isSelected",value:function(e){return this.state.selected===e}},{key:"handleClick",value:function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({selected:a.child}),n=a.id,r=a.child,l=a.name,e.next=6,m.a.post("/client",new URLSearchParams({loginId:n,customerId:r,name:l}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null,"Available Customer IDs"),r.a.createElement(S.a,{variant:"overline"},"Make sure to select an account before visiting the dashboard or query page."),r.a.createElement(le.a,{size:"small"},r.a.createElement(oe.a,null,r.a.createElement(ie.a,null,r.a.createElement(se.a,null,"Select"),r.a.createElement(se.a,null,"Login ID"),r.a.createElement(se.a,null,"Client Account ID"),r.a.createElement(se.a,null,"Client Account Name"))),this.pickContentToDisplay()))}}]),a}(r.a.Component),Ue=Object(T.a)(ke),ze=function(e){Object(W.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleStorageChange=n.handleStorageChange.bind(Object(L.a)(n)),n.updateShouldRunTutorial=n.updateShouldRunTutorial.bind(Object(L.a)(n)),n.handleJoyrideCallback=n.handleJoyrideCallback.bind(Object(L.a)(n)),window.addEventListener("storage",(function(){n.handleStorageChange()})),n.state={shouldRunTutorial:n.updateShouldRunTutorial()},n}return Object(D.a)(a,[{key:"updateShouldRunTutorial",value:function(){return null==localStorage.getItem("runTutorial")||"true"===localStorage.getItem("runTutorial")}},{key:"handleStorageChange",value:function(){this.setState({shouldRunTutorial:this.updateShouldRunTutorial()})}},{key:"handleJoyrideCallback",value:function(e){var t=e.status;[fe.a.FINISHED,fe.a.SKIPPED].includes(t)&&(localStorage.setItem("runTutorial",!1),this.setState({shouldRunTutorial:!1}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.b,{steps:Se,continuous:!0,showProgress:!0,showSkipButton:!0,run:this.state.shouldRunTutorial,callback:this.handleJoyrideCallback}),r.a.createElement(_e,null))}}]),a}(r.a.Component),_e=function(e){var t=Ue();return r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(Y.a,{className:t.paper+" login-button"},r.a.createElement(He,null))),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(Y.a,{className:t.paper+" available-accounts"},r.a.createElement(Je,null))))},Ye=ze,Xe=[{name:"Login",route:"/",icon:r.a.createElement(H.a,null),component:Ye},{name:"Dashboard",route:"/Dashboard",icon:r.a.createElement(J.a,null),component:xe},{name:"Queries",route:"/Query",icon:r.a.createElement(z.a,null),component:qe}],$e=function(){return r.a.createElement(Q.a,null)},Ve=a(545),Ze=a(552),et=a(553),tt=a(91),at=function(e){return r.a.createElement(Ve.a,{button:!0,key:e.name,component:tt.b,to:e.route},r.a.createElement(Ze.a,null,e.icon),r.a.createElement(et.a,{primary:e.name}))},nt=function(){return r.a.createElement("div",null,Xe.map(at))},rt=Object(T.a)(ke);function lt(e){var t=rt(),a=r.a.useState(!0),n=Object(i.a)(a,2),l=n[0],c=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{position:"absolute",className:Object(d.a)(t.appBar,l&&t.appBarShift)},r.a.createElement(g.a,{className:t.toolbar},r.a.createElement(p.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)},className:Object(d.a)(t.menuButton,l&&t.menuButtonHidden)},r.a.createElement(f.a,null)),r.a.createElement(S.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"Google Ads API Web App Demo"),r.a.createElement(p.a,{color:"inherit",onClick:function(){localStorage.setItem("runTutorial",!0),window.dispatchEvent(new StorageEvent("storage"))}},r.a.createElement(b.a,null)),r.a.createElement(p.a,{color:"inherit",onClick:function(){m.a.get("/logout"),window.location.reload(!0)}},r.a.createElement(y.a,null)))),r.a.createElement(w.a,{variant:"permanent",classes:{paper:Object(d.a)(t.drawerPaper,!l&&t.drawerPaperClose)},open:l},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(p.a,{onClick:function(){c(!1)}},r.a.createElement(x.a,null))),r.a.createElement(C.a,null),r.a.createElement(O.a,null,r.a.createElement(nt,{message:"ok"}))))}var ct=a(23),st=function(){return Xe.map((function(e){return function(e){return r.a.createElement(ct.a,{exact:!0,path:e.route},r.a.createElement(e.component,null))}(e)}))},ot=function(){return r.a.createElement(ct.c,null,st())},it=Object(T.a)(ke);function ut(){var e=it();return r.a.createElement("div",{className:e.root},r.a.createElement(s.a,null),r.a.createElement(tt.a,null,r.a.createElement(lt,null),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.appBarSpacer}),r.a.createElement(o.a,{maxWidth:"lg",className:e.container},r.a.createElement(ot,null)))))}c.a.render(r.a.createElement(ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[287,1,2]]]);
//# sourceMappingURL=main.8e82bdb6.chunk.js.map