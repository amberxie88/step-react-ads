{"ast":null,"code":"import _toConsumableArray from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */import React,{useState,useEffect}from'react';import{useTheme}from'@material-ui/core/styles';import{ScatterChart,Scatter,XAxis,YAxis,ZAxis,Tooltip,CartesianGrid,Label,ResponsiveContainer}from'recharts';import{makeStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';import axios from'axios';import*as HttpStatus from'http-status-codes';import Title from'../../../Utilities/Title';import{createChainedFunction}from'@material-ui/core';import{LoadingComponent}from'../../../Utilities/Constants';export default function SentimentGraph(){var theme=useTheme();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),scatterData=_useState2[0],setScatterData=_useState2[1];var useStyles=makeStyles({depositContext:{flex:1}});var classes=useStyles();var _useState3=useState('loading'),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/chart-api');case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(data);if(!(data.meta.status!==HttpStatus.OK.toString())){_context.next=10;break;}throw new Error(data.meta.message);case 10:for(i=0;i<data.response.length;i++){data.response[i]['metrics.clicks']=+data.response[i]['metrics.clicks'];}setScatterData(data.response);setState('loaded');case 13:_context.next=20;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);setScatterData(_context.t0.message);setState('error');case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}))();},[]);var pickContentToDisplay=function pickContentToDisplay(){switch(state){case'loading':return/*#__PURE__*/React.createElement(LoadingComponent,null);case'loaded':var clicksArr=scatterData.map(function(point){return point['metrics.clicks'];});var maxClicks=Math.max.apply(Math,_toConsumableArray(clicksArr));return/*#__PURE__*/React.createElement(ResponsiveContainer,null,/*#__PURE__*/React.createElement(ScatterChart,{width:400,height:400,margin:{top:20,right:20,bottom:20,left:20}},/*#__PURE__*/React.createElement(CartesianGrid,null),/*#__PURE__*/React.createElement(XAxis,{dataKey:'sentiment',type:\"number\",name:\"sentiment\",domain:[0,1]},/*#__PURE__*/React.createElement(Label,{position:\"bottom\",style:{textAnchor:'middle',fill:theme.palette.text.primary}},\"Sentiment\")),/*#__PURE__*/React.createElement(YAxis,{dataKey:'metrics.clicks',type:\"number\",name:\"clicks\",domain:[0,'dataMax']},/*#__PURE__*/React.createElement(Label,{angle:270,position:\"left\",style:{textAnchor:'middle',fill:theme.palette.text.primary}},\"Clicks\")),/*#__PURE__*/React.createElement(ZAxis,{dataKey:'headline',name:\"ad headline\"}),/*#__PURE__*/React.createElement(Scatter,{name:\"Sentiment Graph\",data:scatterData,fill:\"#8884d8\"}),/*#__PURE__*/React.createElement(Tooltip,{cursor:{strokeDasharray:'3 3'}})));case'error':return/*#__PURE__*/React.createElement(Title,null,\"Something Went Wrong. Here's the Error Message: \"+scatterData);default:return/*#__PURE__*/React.createElement(Title,null,\" Something Went Wrong\");}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Title,null,\"Expanded Text Ad Clicks vs. Sentiment\"),/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",className:classes.depositContext},\"Graph of clicks vs. headline sentiment (0 most negative, 1 most positive).\"),pickContentToDisplay());}","map":{"version":3,"sources":["/home/kjchan/step-react-ads/client/src/Dashboard/Pages/ReportsPage/Reports/SentimentGraph.js"],"names":["React","useState","useEffect","useTheme","ScatterChart","Scatter","XAxis","YAxis","ZAxis","Tooltip","CartesianGrid","Label","ResponsiveContainer","makeStyles","Typography","axios","HttpStatus","Title","createChainedFunction","LoadingComponent","SentimentGraph","theme","scatterData","setScatterData","useStyles","depositContext","flex","classes","state","setState","get","data","console","log","meta","status","OK","toString","Error","message","i","response","length","pickContentToDisplay","clicksArr","map","point","maxClicks","Math","max","top","right","bottom","left","textAnchor","fill","palette","text","primary","strokeDasharray"],"mappings":"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","sourcesContent":["/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport { useTheme } from '@material-ui/core/styles';\nimport {\n  ScatterChart,\n  Scatter,\n  XAxis,\n  YAxis,\n  ZAxis,\n  Tooltip,\n  CartesianGrid,\n  Label,\n  ResponsiveContainer,\n} from 'recharts';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport axios from 'axios';\nimport * as HttpStatus from 'http-status-codes';\nimport Title from '../../../Utilities/Title';\nimport { createChainedFunction } from '@material-ui/core';\nimport { LoadingComponent } from '../../../Utilities/Constants';\n\nexport default function SentimentGraph() {\n  const theme = useTheme();\n  const [scatterData, setScatterData] = useState([]);\n  const useStyles = makeStyles({\n    depositContext: {\n      flex: 1,\n    },\n  });\n  const classes = useStyles();\n  const [state, setState] = useState('loading');\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data } = await axios.get('/chart-api');\n        console.log(data);\n        if (data.meta.status !== HttpStatus.OK.toString()) {\n          throw new Error(data.meta.message);\n        } else {\n          for (var i = 0; i < data.response.length; i++) {\n            data.response[i]['metrics.clicks'] = +data.response[i][\n              'metrics.clicks'\n            ];\n          }\n          setScatterData(data.response);\n          setState('loaded');\n        }\n      } catch (err) {\n        console.log(err.message);\n        setScatterData(err.message);\n        setState('error');\n      }\n    })();\n  }, []);\n\n  const pickContentToDisplay = () => {\n    switch (state) {\n      case 'loading':\n        return <LoadingComponent />;\n      case 'loaded':\n        var clicksArr = scatterData.map((point) => point['metrics.clicks']);\n        var maxClicks = Math.max(...clicksArr);\n        return (\n          <ResponsiveContainer>\n            <ScatterChart\n              width={400}\n              height={400}\n              margin={{ top: 20, right: 20, bottom: 20, left: 20 }}\n            >\n              <CartesianGrid />\n              <XAxis\n                dataKey={'sentiment'}\n                type=\"number\"\n                name=\"sentiment\"\n                domain={[0, 1]}\n              >\n                <Label\n                  position=\"bottom\"\n                  style={{\n                    textAnchor: 'middle',\n                    fill: theme.palette.text.primary,\n                  }}\n                >\n                  Sentiment\n                </Label>\n              </XAxis>\n              <YAxis\n                dataKey={'metrics.clicks'}\n                type=\"number\"\n                name=\"clicks\"\n                domain={[0, 'dataMax']}\n              >\n                <Label\n                  angle={270}\n                  position=\"left\"\n                  style={{\n                    textAnchor: 'middle',\n                    fill: theme.palette.text.primary,\n                  }}\n                >\n                  Clicks\n                </Label>\n              </YAxis>\n              <ZAxis dataKey={'headline'} name=\"ad headline\" />\n              <Scatter\n                name=\"Sentiment Graph\"\n                data={scatterData}\n                fill=\"#8884d8\"\n              />\n              <Tooltip cursor={{ strokeDasharray: '3 3' }} />\n            </ScatterChart>\n          </ResponsiveContainer>\n        );\n      case 'error':\n        return (\n          <Title>\n            {\"Something Went Wrong. Here's the Error Message: \" + scatterData}\n          </Title>\n        );\n      default:\n        return <Title> Something Went Wrong</Title>;\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <Title>Expanded Text Ad Clicks vs. Sentiment</Title>\n      <Typography color=\"textSecondary\" className={classes.depositContext}>\n        Graph of clicks vs. headline sentiment (0 most negative, 1 most\n        positive).\n      </Typography>\n      {pickContentToDisplay()}\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}