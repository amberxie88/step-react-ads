{"ast":null,"code":"import _regeneratorRuntime from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/kjchan/step-react-ads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */import React from'react';import axios from'axios';import Title from'../../Utilities/Title';import Typography from'@material-ui/core/Typography';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Checkbox from'@material-ui/core/Checkbox';var Accounts=/*#__PURE__*/function(_React$Component){_inherits(Accounts,_React$Component);var _super=_createSuper(Accounts);function Accounts(props){var _this;_classCallCheck(this,Accounts);_this=_super.call(this,props);_this.fetchCustomers=_this.fetchCustomers.bind(_assertThisInitialized(_this));_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));_this.isSelected=_this.isSelected.bind(_assertThisInitialized(_this));_this.state={customerIds:[],selected:'',status:'none authenticated',errorMessage:''};return _this;}_createClass(Accounts,[{key:\"fetchCustomers\",value:function(){var _fetchCustomers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({status:'loading'});_context.prev=1;_context.next=4;return axios.get('/customer');case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.meta.status!=='200')){_context.next=10;break;}throw new Error(data.meta.message);case 10:console.log(data.response);this.setState({customerIds:data.response,status:'loaded'});case 12:_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);console.log(_context.t0.message);this.setState({status:'none authenticated',errorMessage:_context.t0.message});case 18:case\"end\":return _context.stop();}}},_callee,this,[[1,14]]);}));function fetchCustomers(){return _fetchCustomers.apply(this,arguments);}return fetchCustomers;}()},{key:\"pickContentToDisplay\",value:function pickContentToDisplay(){var _this2=this;var customerIds=this.state.customerIds;console.log(customerIds);switch(this.state.status){case'none authenticated':return/*#__PURE__*/React.createElement(Typography,{variant:\"overline\"},\"Log in to access your accounts.\");case'error':return/*#__PURE__*/React.createElement(Typography,{variant:\"overline\"},\"Something Went Wrong. Here's the Error Message: \"+this.state.errorMessage);case'loading':return/*#__PURE__*/React.createElement(Typography,{variant:\"overline\"},\"Loading . . .\");case'loaded':return/*#__PURE__*/React.createElement(TableBody,null,customerIds.map(function(row){return/*#__PURE__*/React.createElement(TableRow,{key:row.id,onClick:function onClick(event){return _this2.handleClick(event,row);},role:\"checkbox\",\"aria-checked\":_this2.isSelected(row.child),tabIndex:-1,selected:_this2.isSelected(row.child),hover:true},/*#__PURE__*/React.createElement(TableCell,{padding:\"checkbox\"},/*#__PURE__*/React.createElement(Checkbox,{checked:_this2.isSelected(row.child)})),/*#__PURE__*/React.createElement(TableCell,{key:row.id},row.id),/*#__PURE__*/React.createElement(TableCell,{key:row.child},row.child),/*#__PURE__*/React.createElement(TableCell,{key:row.name},row.name));}));default:return/*#__PURE__*/React.createElement(Typography,{variant:\"overline\"},\"Log in to access your accounts.\");}}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchCustomers();this.setState({selected:''});}},{key:\"isSelected\",value:function isSelected(id){return this.state.selected===id;}},{key:\"handleClick\",value:function(){var _handleClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event,row){var loginId,customerId,name,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.setState({selected:row.child});loginId=row.id;customerId=row.child;name=row.name;_context2.next=6;return axios.post('/client',new URLSearchParams({loginId:loginId,customerId:customerId,name:name}));case 6:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function handleClick(_x,_x2){return _handleClick.apply(this,arguments);}return handleClick;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Title,null,\"Available Customer IDs\"),/*#__PURE__*/React.createElement(Table,{size:\"small\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Select\"),/*#__PURE__*/React.createElement(TableCell,null,\"Login ID\"),/*#__PURE__*/React.createElement(TableCell,null,\"Client Account ID\"),/*#__PURE__*/React.createElement(TableCell,null,\"Client Account Name\"))),this.pickContentToDisplay()));}}]);return Accounts;}(React.Component);export default Accounts;","map":{"version":3,"sources":["/home/kjchan/step-react-ads/client/src/Dashboard/PageComponents/LoginDashboard/Accounts.js"],"names":["React","axios","Title","Typography","Table","TableBody","TableCell","TableHead","TableRow","Checkbox","Accounts","props","fetchCustomers","bind","handleClick","isSelected","state","customerIds","selected","status","errorMessage","setState","get","data","meta","Error","message","console","log","response","map","row","id","event","child","name","loginId","customerId","post","URLSearchParams","pickContentToDisplay","Component"],"mappings":"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","sourcesContent":["/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport axios from 'axios';\nimport Title from '../../Utilities/Title';\nimport Typography from '@material-ui/core/Typography';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nclass Accounts extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fetchCustomers = this.fetchCustomers.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.isSelected = this.isSelected.bind(this);\n    this.state = {\n      customerIds: [],\n      selected: '',\n      status: 'none authenticated',\n      errorMessage: '',\n    };\n  }\n\n  async fetchCustomers() {\n    this.setState({ status: 'loading' });\n\n    try {\n      const { data } = await axios.get('/customer');\n\n      if (data.meta.status !== '200') {\n        throw new Error(data.meta.message);\n      } else {\n        console.log(data.response);\n        this.setState({\n          customerIds: data.response,\n          status: 'loaded',\n        });\n      }\n    } catch (err) {\n      console.log(err.message);\n      this.setState({\n        status: 'none authenticated',\n        errorMessage: err.message,\n      });\n    }\n  }\n\n  pickContentToDisplay() {\n    const customerIds = this.state.customerIds;\n    console.log(customerIds);\n    switch (this.state.status) {\n      case 'none authenticated':\n        return (\n          <Typography variant=\"overline\">\n            Log in to access your accounts.\n          </Typography>\n        );\n      case 'error':\n        return (\n          <Typography variant=\"overline\">\n            {\"Something Went Wrong. Here's the Error Message: \" +\n              this.state.errorMessage}\n          </Typography>\n        );\n      case 'loading':\n        return <Typography variant=\"overline\">Loading . . .</Typography>;\n      case 'loaded':\n        return (\n          <TableBody>\n            {customerIds.map((row) => (\n              <TableRow\n                key={row.id}\n                onClick={(event) => this.handleClick(event, row)}\n                role=\"checkbox\"\n                aria-checked={this.isSelected(row.child)}\n                tabIndex={-1}\n                selected={this.isSelected(row.child)}\n                hover\n              >\n                <TableCell padding=\"checkbox\">\n                  <Checkbox checked={this.isSelected(row.child)} />\n                </TableCell>\n                <TableCell key={row.id}>{row.id}</TableCell>\n                <TableCell key={row.child}>{row.child}</TableCell>\n                <TableCell key={row.name}>{row.name}</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        );\n      default:\n        return (\n          <Typography variant=\"overline\">\n            Log in to access your accounts.\n          </Typography>\n        );\n    }\n  }\n\n  componentDidMount() {\n    this.fetchCustomers();\n    this.setState({\n      selected: '',\n    });\n  }\n\n  isSelected(id) {\n    return this.state.selected === id;\n  }\n\n  async handleClick(event, row) {\n    this.setState({\n      selected: row.child,\n    });\n    const loginId = row.id;\n    const customerId = row.child;\n    const name = row.name;\n    const { data } = await axios.post(\n      '/client',\n      new URLSearchParams({ loginId, customerId, name }),\n    );\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Title>Available Customer IDs</Title>\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Select</TableCell>\n              <TableCell>Login ID</TableCell>\n              <TableCell>Client Account ID</TableCell>\n              <TableCell>Client Account Name</TableCell>\n            </TableRow>\n          </TableHead>\n          {this.pickContentToDisplay()}\n        </Table>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Accounts;\n"]},"metadata":{},"sourceType":"module"}