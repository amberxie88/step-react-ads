{"ast":null,"code":"var _jsxFileName = \"/home/kjchan/step-react-ads/client/src/Dashboard/PageComponents/QueryDashboard/Queries.js\";\n\n/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport axios from 'axios';\nimport * as HttpStatus from 'http-status-codes';\nimport { makeStyles } from '@material-ui/core/styles';\nimport QueryResults from './QueryResults';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Title from '../../Utilities/Title';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: theme.spacing(1)\n  }\n})); //JSON data parsing here\n\nfunction addKey(index, responseObj) {\n  responseObj.id = index;\n  return responseObj;\n}\n\nfunction parseRows(response) {\n  const responseRows = [];\n  let i;\n\n  for (i = 0; i < response.length; i++) {\n    responseRows.push(addKey(i, response[i]));\n  }\n\n  return responseRows;\n}\n\nclass Query extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleQuery = this.handleQuery.bind(this);\n    this.state = {\n      value: '',\n      rows: [],\n      fields: [],\n      rowsPerPage: 5,\n      status: 'inputRequired',\n      errorMessage: ''\n    };\n  }\n\n  async handleQuery() {\n    const query = this.state.value;\n    this.setState({\n      status: 'loading'\n    });\n\n    try {\n      const {\n        data\n      } = await axios.post('/campaign', new URLSearchParams({\n        query\n      }));\n\n      if (data.meta.status !== HttpStatus.OK.toString()) {\n        throw new Error(data.meta.message);\n      } else {\n        this.setState({\n          rows: parseRows(data.response),\n          fields: data.fieldmask,\n          status: 'loaded'\n        });\n      }\n    } catch (err) {\n      console.log(err.message);\n      this.setState({\n        status: 'error',\n        errorMessage: err.message\n      });\n    }\n  }\n\n  pickContentToDisplay() {\n    switch (this.state.status) {\n      case 'inputRequired':\n        return /*#__PURE__*/React.createElement(Title, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 16\n          }\n        }, \" Enter a query to see the results \");\n\n      case 'loading':\n        return /*#__PURE__*/React.createElement(Title, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 16\n          }\n        }, \" Loading ... \");\n\n      case 'loaded':\n        return /*#__PURE__*/React.createElement(QueryResults, {\n          rows: this.state.rows,\n          fields: this.state.fields,\n          rowsPerPage: this.state.rowsPerPage,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 11\n          }\n        });\n\n      case 'error':\n        return /*#__PURE__*/React.createElement(Title, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 11\n          }\n        }, \"Something Went Wrong. Here's the Error Message: \" + this.state.errorMessage);\n\n      default:\n        return /*#__PURE__*/React.createElement(Title, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 16\n          }\n        }, \" Something Went Wrong\");\n    }\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  render() {\n    // const rows = this.state.rows;\n    // const fields = this.state.fields;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, \"Query Here\"), /*#__PURE__*/React.createElement(TextField, {\n      value: this.state.value,\n      onChange: this.handleChange,\n      id: \"standard-full-width\",\n      label: \"Enter Query\",\n      style: {\n        margin: 8\n      },\n      placeholder: \"SELECT campaign.id, campaign.name FROM campaign\",\n      helperText: \"make sure to select an account!\",\n      fullWidth: true,\n      margin: \"normal\",\n      InputLabelProps: {\n        shrink: true\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(SubmitButton, {\n      onClick: this.handleQuery,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }\n    }), this.pickContentToDisplay());\n  }\n\n}\n\nfunction SubmitButton(props) {\n  const classes = useStyles();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    onClick: props.onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, \"Submit\"));\n}\n\nexport default Query;","map":{"version":3,"sources":["/home/kjchan/step-react-ads/client/src/Dashboard/PageComponents/QueryDashboard/Queries.js"],"names":["React","axios","HttpStatus","makeStyles","QueryResults","TextField","Button","Title","useStyles","theme","root","margin","spacing","addKey","index","responseObj","id","parseRows","response","responseRows","i","length","push","Query","Component","constructor","props","handleChange","bind","handleQuery","state","value","rows","fields","rowsPerPage","status","errorMessage","query","setState","data","post","URLSearchParams","meta","OK","toString","Error","message","fieldmask","err","console","log","pickContentToDisplay","event","target","render","shrink","SubmitButton","classes","onClick"],"mappings":";;AAAA;;;;;;;;;;;;;;;AAeA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,UAAZ,MAA4B,mBAA5B;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AAGA,MAAMC,SAAS,GAAGL,UAAU,CAAEM,KAAD,KAAY;AACvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,MAAM,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AADJ;AADiC,CAAZ,CAAD,CAA5B,C,CAMA;;AACA,SAASC,MAAT,CAAgBC,KAAhB,EAAuBC,WAAvB,EAAoC;AAClCA,EAAAA,WAAW,CAACC,EAAZ,GAAiBF,KAAjB;AACA,SAAOC,WAAP;AACD;;AAED,SAASE,SAAT,CAAmBC,QAAnB,EAA6B;AAC3B,QAAMC,YAAY,GAAG,EAArB;AACA,MAAIC,CAAJ;;AACA,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGF,QAAQ,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCD,IAAAA,YAAY,CAACG,IAAb,CAAkBT,MAAM,CAACO,CAAD,EAAIF,QAAQ,CAACE,CAAD,CAAZ,CAAxB;AACD;;AACD,SAAOD,YAAP;AACD;;AAED,MAAMI,KAAN,SAAoBvB,KAAK,CAACwB,SAA1B,CAAoC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,EADI;AAEXC,MAAAA,IAAI,EAAE,EAFK;AAGXC,MAAAA,MAAM,EAAE,EAHG;AAIXC,MAAAA,WAAW,EAAE,CAJF;AAKXC,MAAAA,MAAM,EAAE,eALG;AAMXC,MAAAA,YAAY,EAAE;AANH,KAAb;AAQD;;AAED,QAAMP,WAAN,GAAoB;AAClB,UAAMQ,KAAK,GAAG,KAAKP,KAAL,CAAWC,KAAzB;AACA,SAAKO,QAAL,CAAc;AAAEH,MAAAA,MAAM,EAAE;AAAV,KAAd;;AACA,QAAI;AACF,YAAM;AAAEI,QAAAA;AAAF,UAAW,MAAMtC,KAAK,CAACuC,IAAN,CACrB,WADqB,EAErB,IAAIC,eAAJ,CAAoB;AAAEJ,QAAAA;AAAF,OAApB,CAFqB,CAAvB;;AAIA,UAAIE,IAAI,CAACG,IAAL,CAAUP,MAAV,KAAqBjC,UAAU,CAACyC,EAAX,CAAcC,QAAd,EAAzB,EAAmD;AACjD,cAAM,IAAIC,KAAJ,CAAUN,IAAI,CAACG,IAAL,CAAUI,OAApB,CAAN;AACD,OAFD,MAEO;AACL,aAAKR,QAAL,CAAc;AACZN,UAAAA,IAAI,EAAEf,SAAS,CAACsB,IAAI,CAACrB,QAAN,CADH;AAEZe,UAAAA,MAAM,EAAEM,IAAI,CAACQ,SAFD;AAGZZ,UAAAA,MAAM,EAAE;AAHI,SAAd;AAKD;AACF,KAdD,CAcE,OAAOa,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACF,OAAhB;AACA,WAAKR,QAAL,CAAc;AAAEH,QAAAA,MAAM,EAAE,OAAV;AAAmBC,QAAAA,YAAY,EAAEY,GAAG,CAACF;AAArC,OAAd;AACD;AACF;;AAEDK,EAAAA,oBAAoB,GAAG;AACrB,YAAQ,KAAKrB,KAAL,CAAWK,MAAnB;AACE,WAAK,eAAL;AACE,4BAAO,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAAP;;AACF,WAAK,SAAL;AACE,4BAAO,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAP;;AACF,WAAK,QAAL;AACE,4BACE,oBAAC,YAAD;AACE,UAAA,IAAI,EAAE,KAAKL,KAAL,CAAWE,IADnB;AAEE,UAAA,MAAM,EAAE,KAAKF,KAAL,CAAWG,MAFrB;AAGE,UAAA,WAAW,EAAE,KAAKH,KAAL,CAAWI,WAH1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;;AAOF,WAAK,OAAL;AACE,4BACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,qDACC,KAAKJ,KAAL,CAAWM,YAFf,CADF;;AAMF;AACE,4BAAO,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAP;AArBJ;AAuBD;;AAEDT,EAAAA,YAAY,CAACyB,KAAD,EAAQ;AAClB,SAAKd,QAAL,CAAc;AAAEP,MAAAA,KAAK,EAAEqB,KAAK,CAACC,MAAN,CAAatB;AAAtB,KAAd;AACD;;AAEDuB,EAAAA,MAAM,GAAG;AACP;AACA;AACA,wBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,oBAAC,SAAD;AACE,MAAA,KAAK,EAAE,KAAKxB,KAAL,CAAWC,KADpB;AAEE,MAAA,QAAQ,EAAE,KAAKJ,YAFjB;AAGE,MAAA,EAAE,EAAC,qBAHL;AAIE,MAAA,KAAK,EAAC,aAJR;AAKE,MAAA,KAAK,EAAE;AAAEhB,QAAAA,MAAM,EAAE;AAAV,OALT;AAME,MAAA,WAAW,EAAC,iDANd;AAOE,MAAA,UAAU,EAAC,iCAPb;AAQE,MAAA,SAAS,MARX;AASE,MAAA,MAAM,EAAC,QATT;AAUE,MAAA,eAAe,EAAE;AACf4C,QAAAA,MAAM,EAAE;AADO,OAVnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAgBE,oBAAC,YAAD;AAAc,MAAA,OAAO,EAAE,KAAK1B,WAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBF,EAiBG,KAAKsB,oBAAL,EAjBH,CADF;AAqBD;;AA5FiC;;AA+FpC,SAASK,YAAT,CAAsB9B,KAAtB,EAA6B;AAC3B,QAAM+B,OAAO,GAAGjD,SAAS,EAAzB;AACA,sBACE;AAAK,IAAA,SAAS,EAAEiD,OAAO,CAAC/C,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,UAAhB;AAA2B,IAAA,OAAO,EAAEgB,KAAK,CAACgC,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CADF;AAOD;;AAED,eAAenC,KAAf","sourcesContent":["/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport axios from 'axios';\nimport * as HttpStatus from 'http-status-codes';\nimport { makeStyles } from '@material-ui/core/styles';\nimport QueryResults from './QueryResults';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Title from '../../Utilities/Title';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: theme.spacing(1),\n  },\n}));\n\n//JSON data parsing here\nfunction addKey(index, responseObj) {\n  responseObj.id = index;\n  return responseObj;\n}\n\nfunction parseRows(response) {\n  const responseRows = [];\n  let i;\n  for (i = 0; i < response.length; i++) {\n    responseRows.push(addKey(i, response[i]));\n  }\n  return responseRows;\n}\n\nclass Query extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleQuery = this.handleQuery.bind(this);\n    this.state = {\n      value: '',\n      rows: [],\n      fields: [],\n      rowsPerPage: 5,\n      status: 'inputRequired',\n      errorMessage: '',\n    };\n  }\n\n  async handleQuery() {\n    const query = this.state.value;\n    this.setState({ status: 'loading' });\n    try {\n      const { data } = await axios.post(\n        '/campaign',\n        new URLSearchParams({ query }),\n      );\n      if (data.meta.status !== HttpStatus.OK.toString()) {\n        throw new Error(data.meta.message);\n      } else {\n        this.setState({\n          rows: parseRows(data.response),\n          fields: data.fieldmask,\n          status: 'loaded',\n        });\n      }\n    } catch (err) {\n      console.log(err.message);\n      this.setState({ status: 'error', errorMessage: err.message });\n    }\n  }\n\n  pickContentToDisplay() {\n    switch (this.state.status) {\n      case 'inputRequired':\n        return <Title> Enter a query to see the results </Title>;\n      case 'loading':\n        return <Title> Loading ... </Title>;\n      case 'loaded':\n        return (\n          <QueryResults\n            rows={this.state.rows}\n            fields={this.state.fields}\n            rowsPerPage={this.state.rowsPerPage}\n          />\n        );\n      case 'error':\n        return (\n          <Title>\n            {\"Something Went Wrong. Here's the Error Message: \" +\n              this.state.errorMessage}\n          </Title>\n        );\n      default:\n        return <Title> Something Went Wrong</Title>;\n    }\n  }\n\n  handleChange(event) {\n    this.setState({ value: event.target.value });\n  }\n\n  render() {\n    // const rows = this.state.rows;\n    // const fields = this.state.fields;\n    return (\n      <React.Fragment>\n        <Title>Query Here</Title>\n        <TextField\n          value={this.state.value}\n          onChange={this.handleChange}\n          id=\"standard-full-width\"\n          label=\"Enter Query\"\n          style={{ margin: 8 }}\n          placeholder=\"SELECT campaign.id, campaign.name FROM campaign\"\n          helperText=\"make sure to select an account!\"\n          fullWidth\n          margin=\"normal\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n        />\n        <SubmitButton onClick={this.handleQuery} />\n        {this.pickContentToDisplay()}\n      </React.Fragment>\n    );\n  }\n}\n\nfunction SubmitButton(props) {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Button variant=\"outlined\" onClick={props.onClick}>\n        Submit\n      </Button>\n    </div>\n  );\n}\n\nexport default Query;\n"]},"metadata":{},"sourceType":"module"}